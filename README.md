# Планировщик задач на Go
Простой веб-сервер на Go, реализующий функционал планировщика задач в соответствии с техническим заданием. Поддержаивает чтение, добавление, редактирование, удаление задач. Отмеченные выполненными задачи переносятся на следующую дату в соответствии с указанным клиентом правилом.

## Исправления

* Изменена структура проекта
* Подключение к БД происходит один раз
* Функции для работы с БД вынесены отдельно
* Добавлено простое логирование

## Реализованный функционал
Сервер написан на стандартной библиотеке Go. Были выполнены все дополнительные части технического задания, в том числе:

* Перенос задач по сложным правилам
* Получение переменных окружения
* Аутентификация с использованием JWT
* Сборка через Docker

## Инструкция по запуску
Сервер можно запустить из корневой папки проекта и проверить по адресу ```http://localhost:7540/``` (если в переменных окружения не указан другой порт):

```
go run .
```

Переменные окружения можно указать в файле ```.env```. Пример со всеми поддерживаемыми переменными:

```
# Порт сервера, по умолчанию 7540
TODO_PORT='7541'

# Путь к файлу БД, по умолчанию ../internal/database/scheduler.db:
TODO_DBFILE='/mypath/scheduler.db'

# Пароль для аутентификации, по умолчанию отсутствует:
TODO_PASSWORD='12345'
```

## Запуск через Docker
Dockerfile находится в каталоге ```/build```, в этом же файле содержатся инструкции по работе с ним:

```
# Сборка из корневой папки:
# docker build -t todo_list_123 -f build/Dockerfile .

# Запуск:
# docker run -p 7540:7540 todo_list_123

# Запуск с переменными окружения:
# docker run -e TODO_PASSWORD="sample" -p 7540:7540 todo_list_123 
```

## Тестирование
Запуск тестов:

```
go test ./tests
```

Настройки для тестов находятся в файле ```tests/settings.go```:

```
# Настройка переменных в соответствии с переменными окружения:
var Port = 7540
var DBFile = "../internal/database/scheduler.db"

# Включить тесты для проверки дополнительного функционала:
var FullNextDate = true
var Search = true

# JWT для проверки аутентификации. 
# По умолчанию соответствует паролю '12345'. 
# Выводится в консоли при авторизации:
var Token = `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.e30.396KCDWMomWrMEImsF84AmFRjBEvSvnyLh3ZA_mB_Wg`
```
